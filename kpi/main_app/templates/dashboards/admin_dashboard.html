{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="dashboard-container">
<a href="{% url 'ai_admin_insights' %}" class="btn blue">AI Organizational Insights</a>

  <!-- Content -->
  <div class="dashboard-content">

    <h2>Admin Dashboard</h2>

    <div class="kpi-box">
      <p>Total Users: {{ total_users }}</p>
      <p>Total Employees: {{ total_employees }}</p>
    </div>

    <h3>KPI Library</h3>

    <div class="kpi-grid">
      {% for kpi, value in admin_kpi_data %}
      <div class="kpi-item">
        <h4>{{ kpi.title }}</h4>
        <p>Total Value: {{ value }}</p>
      </div>
      {% endfor %}
    </div>

    <div class="kpi-box">
      <canvas id="adminChart"></canvas>
    </div>

  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const ctx = document.getElementById('adminChart');
    if (ctx) {
        const adminLabels = {{ chart_labels|safe }};
        const adminValues = {{ chart_values|safe }};

        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: adminLabels,
                datasets: [{
                    data: adminValues,
                    backgroundColor: [
                        '#3B82F6',
                        '#10B981',
                        '#F59E0B',
                        '#EF4444',
                        '#8B5CF6',
                        '#EC4899'
                    ],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }
});
</script>

{% endblock %}
