{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="dashboard-container">

  <div class="sidebar">
    <h3>Company</h3>
    <ul>
      <li><a href="{% url 'manager_dashboard' %}">Dashboard</a></li>
      <li><a href="{% url 'assign_kpi' %}">Assign KPI</a></li>
      <li><a href="#">Report</a></li>
    </ul>
  </div>

  <div class="dashboard-content">

    <div class="dashboard-header">
      <h2>Manager Dashboard</h2>
      <span class="manager-name">{{ manager_name }}</span>
    </div>

    <div class="kpi-box">
      <p><strong>Department:</strong> {{ department }}</p>
      <p><strong>Total Employees:</strong> {{ employees_count }}</p>
    </div>

    <h3>Team KPI Summary</h3>

    <div class="kpi-box">
      <table class="kpi-table">
        <thead>
          <tr>
            <th>Employee</th>
            <th>KPI Completion</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for row in employee_rows %}
          <tr>
            <td>{{ row.name }}</td>
            <td>{{ row.completion }}%</td>
            <td>{{ row.status }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="kpi-box">
      <canvas id="managerChart"></canvas>
    </div>

  </div>
</div>

{% endblock %}
